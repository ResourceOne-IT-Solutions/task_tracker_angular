<div class="userdashinfo" *ngIf="currentUser">
  <div class="userinfo">
    <div>
      <img
        *ngIf="currentUser.profileImageUrl"
        src="{{ url }}/profile-images/{{ currentUser.profileImageUrl }}"
        crossorigin="anonymous"
        alt=""
      />
      <img
        *ngIf="!currentUser.profileImageUrl"
        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQvEqncZEwNmacOsxcOyUMD7z2JiZF4-Z6PVRBu2KZnlxcFU5SZipi_yd4aV0kzwJL17BI&usqp=CAU"
        alt=""
        referrerpolicy="no-referrer"
        crossorigin="use-credentials"
      />
    </div>
    <p class="userName">{{ chatservice.getFullName(currentUser) }}</p>
    <span class="userId">({{ currentUser.userId }} )</span>
    <span
      matTooltip="{{ currentUser.status }}"
      aria-label="Displays a tooltip"
      class="userstatus"
      [ngClass]="currentUser.status"
    ></span>
    <span
      matTooltip="OnTicket"
      class="OnTicket"
      *ngIf="currentUser.status == 'On Ticket'"
    ></span>
  </div>
  <div class="employeList">
    <div class="employeDetails d-flex align-items-center">
      <div class="employeInfo">
        <p class="userslabel">Employeee Details</p>
        <p><label>Emp ID :</label> {{ currentUser.empId }}</p>
        <p>
          <label>Employe Name :</label>
          {{ chatservice.getFullName(currentUser) }}
        </p>
        <p><label>Email :</label> {{ currentUser.email }}</p>
        <p><label>Phone :</label> {{ currentUser.mobile }}</p>
        <p><label>Role :</label> {{ currentUser.designation }}</p>
        <p><label>Status :</label> {{ currentUser.status }}</p>
        <p><label>Gender :</label> {{ currentUser.gender }}</p>
      </div>
      <div class="employeTimeinfo d-flex flex-column">
        <div class="logintime" *ngIf="loginTiming?.length">
          <h2>Login Time</h2>
          <div *ngFor="let logintime of loginTiming">
            <p *ngIf="logintime.date === 'Today'">
              {{ logintime.date }} :
              <span *ngFor="let time of logintime.loginTime">
                {{ time.inTime }} - login :{{
                  time.outTime ? time.outTime : "***"
                }}
                - logout</span
              >
            </p>
          </div>
        </div>
        <div class="status" *ngIf="breakTimes">
          <h2>Break Time</h2>
          <p *ngFor="let status of breakTimes.status">
            <span *ngIf="status.type === 'END'"
              >Start :{{ status.startTime | date: "hh:mm a" }} - End :{{
                status.endTime | date: "hh:mm a"
              }}
              :<b> Duration -</b>
              {{ chatservice.getBreakTimings(status.duration / 60) }}mints --
              {{ status.status }}
            </span>
          </p>
        </div>
      </div>
    </div>
    <div class="employeTicket">
      <!-- <div> -->
      <!-- <p class="userslabel">Stats</p> -->
      <div class="pieChart">
        <h2>Today Tickets</h2>
        <app-pie-chart
          *ngIf="userTickets?.length"
          [pieChartId]="'piechartdemo'"
          [PieChartData]="UserPiechart"
        ></app-pie-chart>
        <p *ngIf="userTickets?.length">
          Total Tickets : {{ userTickets.length }}
        </p>
      </div>
      <!-- </div> -->
      <h2 *ngIf="userTickets.length <= 0">No Today Tickets</h2>
      <div class="employeBtn" *ngIf="!isAdminView">
        <button class="btn btn-info" (click)="requestChat()">
          Request Chat with User
        </button>
        <button class="btn btn-info ms-2">
          <a [routerLink]="['./user-tickets']" class="text-decoration-none"
            >Today Tickets</a
          >
        </button>
        <button class="btn btn-info m-2">
          <!-- Helped Tickets -->
          <a [routerLink]="['./helped-tickets']" class="text-decoration-none"
            >Helped Tickets</a
          >
        </button>
        <div class="requestchat" *ngIf="requestchat">
          <mat-form-field>
            <mat-select
              placeholder="Select user"
              (selectionChange)="selectuser($event.value)"
            >
              <mat-option [value]="user" *ngFor="let user of userList">{{
                chatservice.getFullName(user)
              }}</mat-option>
            </mat-select>
          </mat-form-field>
          <button
            *ngIf="requestchat"
            class="btn btn-warning admin"
            (click)="sendadmin()"
          >
            send Admin
          </button>
        </div>
      </div>
      <div class="timezone d-flex">
        <div class="countryTime">
          <span>PST</span>
          <p>{{ pstDate }}</p>
        </div>
        <div class="countryTime">
          <span>CST</span>
          <p>{{ cstDate }}</p>
        </div>
        <div class="countryTime">
          <span>EST</span>
          <p>{{ est }}</p>
        </div>
      </div>
    </div>
    <!-- </div> -->
  </div>
</div>
