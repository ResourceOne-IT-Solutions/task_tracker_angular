<nav
  class="navbar navbar-light justify-content-between p-2"
  style="background: #bcbdd3"
  *ngIf="userDetails"
>
  <a class="navbar-brand Dashboard" (click)="gotDashBoard()"
    >{{ isAdmin ? "Admin" : "User" }} Dashboard</a
  >
  <div class="mr-sm-2">
    <button class="btn btn-warning m-2">
      <a [routerLink]="['Chat-Box']" class="text-decoration-none">Chat Box</a>
      <span class="roomcount" *ngIf="roomCount > 0">{{ roomCount }}</span>
    </button>
    <ng-container *ngIf="!isAdmin; else admintemplete">
      <button class="btn btn-primary ms-2 my-2 my-sm-0">
        Status :
        <select (change)="changeStatus($event)" [(ngModel)]="Status">
          <option
            class="ms-3"
            [value]="update"
            *ngFor="let update of adminStatus"
          >
            {{ update }}
          </option>
        </select>
        <select
          (change)="changeBreakeStatus($event)"
          [(ngModel)]="BreakStatus"
          *ngIf="Status === 'Break'"
        >
          <option class="ms-3" *ngFor="let break of Breaks">
            {{ break }}
          </option>
        </select>
      </button>
      <span *ngIf="StartTimer">
        <span
          *ngIf="BreakStatus === 'BreakFast Break'"
          class="Breaketimer"
          [ngClass]="textColor ? 'TimeSkip' : ''"
          >{{ format(Minutes) }}:{{ format(Seconds) }}
        </span>
        <span
          *ngIf="BreakStatus === 'Lunch Break'"
          class="Breaketimer"
          [ngClass]="LunchBreak ? 'BreakeTime' : ''"
          >{{ format(Minutes) }}:{{ format(Seconds) }}
        </span>
      </span>
      <button class="btn btn-info m-2" (click)="user()">
        View Request User
      </button>
      <button class="btn btn-info m-2" (click)="userTickets()">Tickets</button>
      <button class="btn btn-info m-2" [routerLink]="['feed-back']">
        Feed Back
      </button>
      <button class="btn btn-info m-2" [routerLink]="['feed-back-list']">
        Check FeedBacks
      </button>
    </ng-container>
    <button class="btn btn-danger ms-3" (click)="logout()">LogOut</button>
  </div>
</nav>
<ng-template #admintemplete>
  <button class="btn btn-primary m-2" (click)="OpenTicketModel()">
    Create Ticket
  </button>
  <button class="btn btn-primary m-2">
    <a [routerLink]="['create-user']" class="text-decoration-none text-white"
      >Add User</a
    >
  </button>
  <button class="btn btn-primary m-2" (click)="openClientModel()">
    Add Client
  </button>
  <button class="btn btn-info m-2" (click)="ViewTicket()">Tickets</button>
  <button class="btn btn-info m-2" (click)="ViewRequest()">
    View Request
    <span class="requestcount" *ngIf="requestCount && requestCount.length">
      {{ requestCount.length }}</span
    >
  </button>

  <button class="btn btn-info m-2" [routerLink]="['feed-back']">
    Feed Back
  </button>
  <button class="btn btn-info m-2" [routerLink]="['feed-back-list']">
    Check FeedBacks
  </button>
</ng-template>

<ng-template #clientModel let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Add New Client</h4>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-md-12">
        <div class="form-group" [formGroup]="clientForm">
          <div class="d-flex justify-content-between">
            <div>
              <label class="ps-2">First Name</label>
              <input
                type="text"
                class="form-control m-2"
                formControlName="name"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && fname.errors"
              >
                <div *ngIf="fname.errors['required']">
                  First Name is required
                </div>
              </div>
            </div>
            <div>
              <label class="ps-2">Location</label>
              <input
                type="text"
                class="form-control m-2"
                formControlName="location"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && location.errors"
              >
                <div *ngIf="location.errors['required']">
                  Location is required
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <label class="ps-2">Email</label>
              <input
                type="email"
                class="form-control m-2"
                formControlName="email"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && email.errors"
              >
                <div *ngIf="email.errors['required']">Email is required</div>
              </div>
            </div>
            <div>
              <label class="ps-2">Phone Number</label>
              <input
                type="text"
                (keypress)="phoneValidation($event)"
                class="form-control m-2"
                formControlName="mobile"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && mobile.errors"
              >
                <div *ngIf="mobile.errors['required']">
                  Phone Number is required
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <label class="ps-2">Technology</label>
              <input
                type="text"
                class="form-control m-2"
                formControlName="technologies"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && technologies.errors"
              >
                <div *ngIf="technologies.errors['required']">
                  Technologies is required
                </div>
              </div>
            </div>
            <div>
              <label class="ps-2">Application Type</label>
              <input
                type="text"
                class="form-control m-2"
                formControlName="applicationType"
              />
              <div
                class="text-danger mb-2 ps-2"
                *ngIf="submitted && applicationType.errors"
              >
                <div *ngIf="applicationType.errors['required']">
                  ApplicationType is required
                </div>
              </div>
            </div>
          </div>
          <label class="ps-2">Company Name</label>
          <input
            type="text"
            class="form-control m-2"
            formControlName="companyName"
          />
          <div
            class="text-danger mb-2 ps-2"
            *ngIf="submitted && companyName.errors"
          >
            <div *ngIf="companyName.errors['required']">
              ApplicationType is required
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-sm btn-danger" (click)="cancel(d)">Cancel</button>
    <button class="btn btn-sm btn-primary" (click)="newClient(d)">
      Add New Client
    </button>
  </div>
</ng-template>

<ng-template #ticketModel let-d="dismiss">
  <div class="modal-header p-2 m-0">
    <h4 class="modal-title p-0 m-0">Creat Ticket</h4>
  </div>
  <div class="modal-body m-2">
    <form [formGroup]="TicketCreationForm">
      <label class="ms-2">Client</label>
      <select
        class="form-control m-2"
        formControlName="client"
        (change)="SelectClient($event)"
      >
        <option value="" disabled selected class="hide">Select Client</option>
        <option *ngFor="let client of clientData" [ngValue]="client">
          {{ client.firstName }}
        </option>
      </select>
      <div
        class="text-danger mb-2 ps-2"
        *ngIf="submitTicketForm && clientName.errors"
      >
        <div *ngIf="clientName.errors['required']">Client Name is Required</div>
      </div>
      <label class="ms-2">Technologies</label>
      <input
        class="form-control m-2"
        type="text"
        formControlName="technologies"
      />
      <div
        class="text-danger mb-2 ps-2"
        *ngIf="submitTicketForm && tickettech.errors"
      >
        <div *ngIf="tickettech.errors['required']">Technology is Required</div>
      </div>
      <label class="ms-2">Taget Date</label>
      <input
        class="form-control m-2"
        type="date"
        formControlName="targetDate"
      />
      <div
        class="text-danger mb-2 ps-2"
        *ngIf="submitTicketForm && targetDate.errors"
      >
        <div *ngIf="targetDate.errors['required']">Target Date is Required</div>
      </div>
      <label class="ms-2">Description</label>
      <textarea
        class="form-control m-2"
        placeholder="description"
        formControlName="description"
      ></textarea>
      <div
        class="text-danger mb-2 ps-2"
        *ngIf="submitTicketForm && description.errors"
      >
        <div *ngIf="description.errors['required']">
          Target Date is Required
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-sm btn-primary" (click)="createTicket(d)">
      Create Ticket
    </button>
    <button class="btn btn-sm btn-danger" (click)="cancel(d)">Cancel</button>
  </div>
</ng-template>
